[build]
  command = "npx @11ty/eleventy"
  publish = "_site"

[functions]
  directory = "src/netlify/functions"

[[redirects]]
  from = "http:///*"
  to = "https://:splat"
  status = 301
  force = true

[[redirects]]
  from = "/auth"
  to = "/.netlify/functions/auth"
  status = 200

[[redirects]]
  from = "/callback"
  to = "/.netlify/functions/callback"
  status = 200

[[redirects]]
  from = "/api/r2/multipart/init"
  to = "/.netlify/functions/r2-presign-init"
  status = 200

[[redirects]]
  from = "/api/r2/multipart/part"
  to = "/.netlify/functions/r2-presign-part"
  status = 200

[[redirects]]
  from = "/api/r2/multipart/complete"
  to = "/.netlify/functions/r2-presign-complete"
  status = 200

[[redirects]]
  from = "/api/r2/multipart/abort"
  to = "/.netlify/functions/r2-presign-abort"
  status = 200

[[redirects]]
  from = "/api/admin-data"
  to = "/.netlify/functions/admin-data"
  status = 200

[[redirects]]
  from = "/api/r2/list"
  to = "/.netlify/functions/r2-list"
  status = 200

[[redirects]]
  from = "/api/r2/delete"
  to = "/.netlify/functions/r2-delete"
  status = 200

[[redirects]]
  from = "/api/crm"
  to = "/.netlify/functions/crm"
  status = 200

[[redirects]]
  from = "/api/crm/*"
  to = "/.netlify/functions/crm"
  status = 200

[[redirects]]
  from = "/api/agent-instruct"
  to = "/.netlify/functions/agent-instruct"
  status = 200

[[redirects]]
  from = "/api/agent-respond"
  to = "/.netlify/functions/agent-respond"
  status = 200

[[redirects]]
  from = "/api/agent-responses"
  to = "/.netlify/functions/agent-responses"
  status = 200

[[redirects]]
  from = "/api/agent-instructions"
  to = "/.netlify/functions/agent-instructions-list"
  status = 200
