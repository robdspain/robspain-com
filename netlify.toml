[build]
  command = "npx @11ty/eleventy"
  publish = "_site"

[functions]
  directory = "src/netlify/functions"
  included_files = ["src/netlify/functions/crm.db"]

[[redirects]]
  from = "http:///*"
  to = "https://:splat"
  status = 301
  force = true

[[redirects]]
  from = "/auth"
  to = "/.netlify/functions/auth"
  status = 200

[[redirects]]
  from = "/callback"
  to = "/.netlify/functions/callback"
  status = 200

[[redirects]]
  from = "/api/r2/multipart/init"
  to = "/.netlify/functions/r2-presign-init"
  status = 200

[[redirects]]
  from = "/api/r2/multipart/part"
  to = "/.netlify/functions/r2-presign-part"
  status = 200

[[redirects]]
  from = "/api/r2/multipart/complete"
  to = "/.netlify/functions/r2-presign-complete"
  status = 200

[[redirects]]
  from = "/api/r2/multipart/abort"
  to = "/.netlify/functions/r2-presign-abort"
  status = 200

[[redirects]]
  from = "/api/admin-data"
  to = "/.netlify/functions/admin-data"
  status = 200

[[redirects]]
  from = "/api/r2/list"
  to = "/.netlify/functions/r2-list"
  status = 200

[[redirects]]
  from = "/api/r2/delete"
  to = "/.netlify/functions/r2-delete"
  status = 200

[[redirects]]
  from = "/api/crm"
  to = "/.netlify/functions/crm"
  status = 200

[[redirects]]
  from = "/api/crm/*"
  to = "/.netlify/functions/crm"
  status = 200

[[redirects]]
  from = "/api/agent-instruct"
  to = "/.netlify/functions/agent-instruct"
  status = 200

[[redirects]]
  from = "/api/agent-respond"
  to = "/.netlify/functions/agent-respond"
  status = 200

[[redirects]]
  from = "/api/agent-responses"
  to = "/.netlify/functions/agent-responses"
  status = 200

[[redirects]]
  from = "/api/agent-instructions"
  to = "/.netlify/functions/agent-instructions-list"
  status = 200

[[redirects]]
  from = "/api/seo-audit"
  to = "/.netlify/functions/seo-audit"
  status = 200

[[redirects]]
  from = "/api/seo-keywords"
  to = "/.netlify/functions/seo-keywords"
  status = 200

[[redirects]]
  from = "/api/behaviorschool-submissions"
  to = "/.netlify/functions/behaviorschool-submissions"
  status = 200

[[redirects]]
  from = "/api/agent-webhook"
  to = "/.netlify/functions/agent-webhook"
  status = 200

# Neo Dashboard API
[[redirects]]
  from = "/api/projects"
  to = "/.netlify/functions/dashboard-api"
  status = 200

[[redirects]]
  from = "/api/projects/*"
  to = "/.netlify/functions/dashboard-api"
  status = 200

[[redirects]]
  from = "/api/quick-wins"
  to = "/.netlify/functions/dashboard-api"
  status = 200

[[redirects]]
  from = "/api/quick-wins/*"
  to = "/.netlify/functions/dashboard-api"
  status = 200

[[redirects]]
  from = "/api/content"
  to = "/.netlify/functions/dashboard-api"
  status = 200

[[redirects]]
  from = "/api/content/*"
  to = "/.netlify/functions/dashboard-api"
  status = 200

[[redirects]]
  from = "/api/sync"
  to = "/.netlify/functions/dashboard-api"
  status = 200
