---
layout: base.njk
title: Task Board - Rob Spain Admin
permalink: /admin/tasks/
---

<style>
  .task-board {
    padding: 20px;
    max-width: 1600px;
    margin: 0 auto;
  }
  
  .task-board h1 {
    margin-bottom: 10px;
    color: #1a202c;
  }
  
  .board-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
  }
  
  .last-updated {
    color: #718096;
    font-size: 14px;
  }
  
  .board-columns {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
  }
  
  .column {
    background: #f7fafc;
    border-radius: 8px;
    padding: 15px;
    min-height: 400px;
  }
  
  .column-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 2px solid #e2e8f0;
  }
  
  .column-title {
    font-weight: 600;
    font-size: 16px;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  
  .column-count {
    background: #cbd5e0;
    color: #2d3748;
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 600;
  }
  
  .urgent { border-left: 4px solid #f56565; }
  .progress { border-left: 4px solid #ed8936; }
  .blocked { border-left: 4px solid #ecc94b; }
  .done { border-left: 4px solid #48bb78; }
  
  .task-card {
    background: white;
    border-radius: 6px;
    padding: 15px;
    margin-bottom: 12px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    cursor: move;
    transition: all 0.2s;
  }
  
  .task-card:hover {
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    transform: translateY(-2px);
  }
  
  .task-card.dragging {
    opacity: 0.5;
  }
  
  .task-title {
    font-weight: 700;
    margin-bottom: 8px;
    color: #2d3748;
    font-size: 15px;
  }
  
  .task-description {
    font-size: 13px;
    color: #4a5568;
    margin-bottom: 10px;
    line-height: 1.6;
  }
  
  .task-steps {
    background: #f7fafc;
    padding: 12px;
    border-radius: 4px;
    margin: 10px 0;
    font-size: 13px;
    line-height: 1.6;
  }
  
  .task-steps ol {
    margin: 8px 0;
    padding-left: 20px;
  }
  
  .task-steps li {
    margin: 6px 0;
    color: #2d3748;
  }
  
  .task-steps code {
    background: #e2e8f0;
    padding: 2px 6px;
    border-radius: 3px;
    font-size: 12px;
    color: #2d3748;
  }
  
  .task-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 12px;
    padding-top: 10px;
    border-top: 1px solid #e2e8f0;
  }
  
  .task-time {
    font-size: 12px;
    color: #fff;
    background: #4299e1;
    padding: 3px 10px;
    border-radius: 12px;
    font-weight: 600;
  }
  
  .task-actions {
    display: flex;
    gap: 8px;
  }
  
  .task-btn {
    background: none;
    border: none;
    cursor: pointer;
    padding: 6px 12px;
    border-radius: 4px;
    font-size: 13px;
    font-weight: 600;
    transition: all 0.2s;
  }
  
  .task-btn:hover {
    background: #edf2f7;
  }
  
  .complete-btn {
    color: #48bb78;
  }
  
  .delete-btn {
    color: #f56565;
  }
  
  .add-task-btn {
    width: 100%;
    padding: 12px;
    background: white;
    border: 2px dashed #cbd5e0;
    border-radius: 6px;
    color: #718096;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.2s;
    font-weight: 600;
  }
  
  .add-task-btn:hover {
    border-color: #4299e1;
    color: #4299e1;
    background: #ebf8ff;
  }
  
  .stats-bar {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
    margin-bottom: 30px;
  }
  
  .stat-card {
    background: white;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  }
  
  .stat-label {
    font-size: 12px;
    color: #718096;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  
  .stat-value {
    font-size: 28px;
    font-weight: 700;
    color: #2d3748;
    margin-top: 5px;
  }
  
  @media (max-width: 768px) {
    .board-columns {
      grid-template-columns: 1fr;
    }
  }
</style>

<div class="task-board">
  <div class="board-header">
    <div>
      <h1>üéØ Task Board</h1>
      <p class="last-updated">Last updated: <span id="last-updated"></span></p>
    </div>
  </div>
  
  <div class="stats-bar">
    <div class="stat-card">
      <div class="stat-label">Urgent Tonight</div>
      <div class="stat-value" id="stat-urgent">0</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">In Progress</div>
      <div class="stat-value" id="stat-progress">0</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Blocked</div>
      <div class="stat-value" id="stat-blocked">0</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Completed Today</div>
      <div class="stat-value" id="stat-done">0</div>
    </div>
  </div>
  
  <div class="board-columns">
    <div class="column urgent" data-column="urgent">
      <div class="column-header">
        <span class="column-title">
          üî¥ Urgent Tonight
        </span>
        <span class="column-count" id="count-urgent">0</span>
      </div>
      <div class="task-list" id="urgent-tasks"></div>
      <button class="add-task-btn" onclick="addTask('urgent')">+ Add Task</button>
    </div>
    
    <div class="column progress" data-column="progress">
      <div class="column-header">
        <span class="column-title">
          üü° In Progress
        </span>
        <span class="column-count" id="count-progress">0</span>
      </div>
      <div class="task-list" id="progress-tasks"></div>
      <button class="add-task-btn" onclick="addTask('progress')">+ Add Task</button>
    </div>
    
    <div class="column blocked" data-column="blocked">
      <div class="column-header">
        <span class="column-title">
          ‚è∏Ô∏è Blocked
        </span>
        <span class="column-count" id="count-blocked">0</span>
      </div>
      <div class="task-list" id="blocked-tasks"></div>
      <button class="add-task-btn" onclick="addTask('blocked')">+ Add Task</button>
    </div>
    
    <div class="column done" data-column="done">
      <div class="column-header">
        <span class="column-title">
          ‚úÖ Done
        </span>
        <span class="column-count" id="count-done">0</span>
      </div>
      <div class="task-list" id="done-tasks"></div>
    </div>
  </div>
</div>

<script>
// Initialize tasks with COMPLETE step-by-step instructions
let tasks = JSON.parse(localStorage.getItem('robTasks')) || {
  urgent: [
    {
      id: 1,
      title: 'üîë Fix study.behaviorschool.com Auth',
      description: 'Add Supabase environment variables to Netlify',
      steps: `<ol>
        <li>Go to <a href="https://supabase.com/dashboard" target="_blank">Supabase Dashboard</a></li>
        <li>Find your study.behaviorschool.com project</li>
        <li>Go to Settings ‚Üí API</li>
        <li>Copy these values:
          <ul>
            <li><code>Project URL</code> (should be nazqgumhstlrtebuzery.supabase.co)</li>
            <li><code>anon public</code> key</li>
            <li><code>service_role</code> key (show secret first)</li>
          </ul>
        </li>
        <li>Go to <a href="https://app.netlify.com" target="_blank">Netlify Dashboard</a></li>
        <li>Find study.behaviorschool.com site</li>
        <li>Site settings ‚Üí Environment variables</li>
        <li>Click "Add a variable" and add:
          <ul>
            <li><code>VITE_SUPABASE_URL</code> = the project URL</li>
            <li><code>VITE_SUPABASE_ANON_KEY</code> = the anon key</li>
            <li><code>SUPABASE_SERVICE_ROLE_KEY</code> = the service role key</li>
          </ul>
        </li>
        <li>Click "Save" - site will auto-redeploy (takes ~2 min)</li>
        <li>Test at study.behaviorschool.com/auth</li>
      </ol>`,
      time: '15 min'
    },
    {
      id: 2,
      title: 'ü§ñ Get Gemini API Key',
      description: 'FREE Google AI key for ACT BSP system',
      steps: `<ol>
        <li>Go to <a href="https://aistudio.google.com/apikey" target="_blank">Google AI Studio</a></li>
        <li>Sign in with your Google account</li>
        <li>Click "Create API Key"</li>
        <li>Copy the key (starts with <code>AIza...</code>)</li>
        <li>Go to <a href="https://vercel.com/dashboard" target="_blank">Vercel Dashboard</a></li>
        <li>Find <code>kcusd-behavior-team</code> project</li>
        <li>Settings ‚Üí Environment Variables</li>
        <li>Add new variable:
          <ul>
            <li>Name: <code>GEMINI_API_KEY</code></li>
            <li>Value: paste the AIza... key</li>
          </ul>
        </li>
        <li>Redeploy the project</li>
        <li>Neo can now test ACT BSP generation!</li>
      </ol>`,
      time: '2 min'
    },
    {
      id: 3,
      title: 'üîê Fix Google OAuth Redirect',
      description: 'Add redirect URI for learning.behaviorschool.com',
      steps: `<ol>
        <li>Go to <a href="https://console.cloud.google.com/apis/credentials" target="_blank">Google Cloud Console</a></li>
        <li>Find OAuth 2.0 Client ID: <code>894893276187-7c1os6kpp1pg1t8sq6bmrop6pfajnumo</code></li>
        <li>Click "Edit" (pencil icon)</li>
        <li>Under "Authorized redirect URIs", click "Add URI"</li>
        <li>Add: <code>https://learning.behaviorschool.com/api/auth/callback/google</code></li>
        <li>Also add for local testing: <code>http://localhost:3000/api/auth/callback/google</code></li>
        <li>Click "Save"</li>
        <li>Test Google login at learning.behaviorschool.com</li>
      </ol>`,
      time: '2 min'
    }
  ],
  progress: [
    {
      id: 4,
      title: 'üß† ACT BSP System',
      description: '900 lines of production code ready - waiting for Gemini API key to test',
      steps: `<strong>Current Status:</strong>
      <ul>
        <li>‚úÖ Complete TypeScript type system</li>
        <li>‚úÖ Gemini integration (900 lines)</li>
        <li>‚úÖ Example management system</li>
        <li>‚úÖ Validation & safety guardrails</li>
        <li>‚è≥ Waiting: Gemini API key (task #2 above)</li>
        <li>‚è≥ Next: Test end-to-end generation</li>
        <li>‚è≥ After: Extract 15-20 more ACT examples from PDFs</li>
      </ul>`,
      time: '10% done'
    }
  ],
  blocked: [
    {
      id: 5,
      title: 'üçé Apple Sign In (iOS App Store Required)',
      description: 'Needed for App Store approval - can wait until before submission',
      steps: `<strong>‚ö†Ô∏è Blocker:</strong> Need Apple Developer account ($99/year)
      
      <strong>When Ready:</strong>
      <ol>
        <li>Go to <a href="https://developer.apple.com/account" target="_blank">Apple Developer Portal</a></li>
        <li>Create Service ID: <code>com.behaviorschool.study.auth</code></li>
        <li>Enable "Sign in with Apple"</li>
        <li>Configure domains and redirect URLs</li>
        <li>Generate private key (.p8 file)</li>
        <li>Add to Supabase: Authentication ‚Üí Providers ‚Üí Apple</li>
        <li>Update auth code to add Apple button</li>
      </ol>
      
      <strong>See full guide:</strong> repos/bcbaaistudytool/APPLE_AUTH_REQUIRED.md`,
      time: '1 hour'
    },
    {
      id: 6,
      title: 'üîë Mac Mini SSH Key',
      description: 'Set up GitHub SSH for easier deployments',
      steps: `<strong>‚ö†Ô∏è Blocker:</strong> Need Mac Mini access
      
      <strong>When Ready:</strong>
      <ol>
        <li>SSH into Mac Mini: <code>ssh rob@mac-mini-ip</code></li>
        <li>Generate SSH key: <code>ssh-keygen -t ed25519 -C "rob@behaviorschool.com"</code></li>
        <li>Press Enter 3 times (accept defaults)</li>
        <li>Copy public key: <code>cat ~/.ssh/id_ed25519.pub</code></li>
        <li>Go to <a href="https://github.com/settings/keys" target="_blank">GitHub SSH Keys</a></li>
        <li>Click "New SSH key"</li>
        <li>Paste the public key</li>
        <li>Test: <code>ssh -T git@github.com</code></li>
      </ol>`,
      time: '5 min'
    }
  ],
  done: []
};

function saveTasks() {
  localStorage.setItem('robTasks', JSON.stringify(tasks));
  updateCounts();
  updateLastUpdated();
}

function updateLastUpdated() {
  const now = new Date().toLocaleString();
  document.getElementById('last-updated').textContent = now;
}

function updateCounts() {
  ['urgent', 'progress', 'blocked', 'done'].forEach(column => {
    const count = tasks[column].length;
    document.getElementById(`count-${column}`).textContent = count;
    document.getElementById(`stat-${column}`).textContent = count;
  });
}

function renderTasks() {
  ['urgent', 'progress', 'blocked', 'done'].forEach(column => {
    const container = document.getElementById(`${column}-tasks`);
    container.innerHTML = tasks[column].map(task => `
      <div class="task-card" draggable="true" data-id="${task.id}">
        <div class="task-title">${task.title}</div>
        <div class="task-description">${task.description}</div>
        ${task.steps ? `<div class="task-steps">${task.steps}</div>` : ''}
        <div class="task-footer">
          <span class="task-time">‚è±Ô∏è ${task.time}</span>
          <div class="task-actions">
            ${column !== 'done' ? `<button class="task-btn complete-btn" onclick="markDone(${task.id})">‚úì Done</button>` : ''}
            <button class="task-btn delete-btn" onclick="deleteTask(${task.id})">√ó Delete</button>
          </div>
        </div>
      </div>
    `).join('');
    
    // Add drag and drop listeners
    container.querySelectorAll('.task-card').forEach(card => {
      card.addEventListener('dragstart', handleDragStart);
      card.addEventListener('dragend', handleDragEnd);
    });
  });
  
  updateCounts();
  updateLastUpdated();
}

let draggedTask = null;

function handleDragStart(e) {
  draggedTask = this;
  this.classList.add('dragging');
  e.dataTransfer.effectAllowed = 'move';
}

function handleDragEnd(e) {
  this.classList.remove('dragging');
}

// Add drop zones
document.querySelectorAll('.task-list').forEach(list => {
  list.addEventListener('dragover', e => {
    e.preventDefault();
    e.dataTransfer.dropEffect = 'move';
  });
  
  list.addEventListener('drop', e => {
    e.preventDefault();
    const targetColumn = list.id.replace('-tasks', '');
    const taskId = parseInt(draggedTask.dataset.id);
    
    // Find and move task
    let task = null;
    for (let column in tasks) {
      const index = tasks[column].findIndex(t => t.id === taskId);
      if (index !== -1) {
        task = tasks[column].splice(index, 1)[0];
        break;
      }
    }
    
    if (task) {
      tasks[targetColumn].push(task);
      saveTasks();
      renderTasks();
    }
  });
});

function markDone(id) {
  for (let column in tasks) {
    const index = tasks[column].findIndex(t => t.id === id);
    if (index !== -1) {
      const task = tasks[column].splice(index, 1)[0];
      tasks.done.push(task);
      saveTasks();
      renderTasks();
      break;
    }
  }
}

function deleteTask(id) {
  if (confirm('Delete this task?')) {
    for (let column in tasks) {
      const index = tasks[column].findIndex(t => t.id === id);
      if (index !== -1) {
        tasks[column].splice(index, 1);
        saveTasks();
        renderTasks();
        break;
      }
    }
  }
}

function addTask(column) {
  const title = prompt('Task title:');
  if (!title) return;
  
  const description = prompt('Description:');
  const time = prompt('Estimated time:');
  
  const newTask = {
    id: Date.now(),
    title,
    description: description || '',
    steps: '',
    time: time || '?'
  };
  
  tasks[column].push(newTask);
  saveTasks();
  renderTasks();
}

// Initial render
renderTasks();
</script>
